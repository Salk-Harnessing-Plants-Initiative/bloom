# Production Environment Configuration Example
# Copy this file to .env.prod and fill in your actual values
# DO NOT commit .env.prod to git!

# PostgreSQL Database Configuration
POSTGRES_DB=postgres
POSTGRES_USER=supabase_admin
POSTGRES_PASSWORD=<your-secure-postgres-password>
POSTGRES_PORT=5432
POSTGRES_HOST=db-prod

# PostgREST - which PostgreSQL schemas to expose over the REST API
PGRST_DB_SCHEMAS=public,auth,storage

# Logflare Analytics Tokens
LOGFLARE_PUBLIC_ACCESS_TOKEN=<your-public-token>
LOGFLARE_PRIVATE_ACCESS_TOKEN=<your-private-token>

# MinIO S3 Storage Credentials
MINIO_ROOT_USER=<your-minio-username>
MINIO_ROOT_PASSWORD=<your-minio-password>
MINIO_DEFAULT_BUCKET=bloom-storage
MINIO_STORAGE_S3_ENDPOINT=https://your-domain.com:9000
MINIO_S3_STORAGE_REGION=us-east-1

# Kong API Gateway Ports
KONG_HTTP_PORT=80
KONG_HTTPS_PORT=443

# Application URLs (PRODUCTION)
SITE_URL=https://your-domain.com
API_EXTERNAL_URL=https://api.your-domain.com
ADDITIONAL_REDIRECT_URLS=https://your-domain.com

# Database Connection Pooler
POOLER_TENANT_ID=production
POOLER_DEFAULT_POOL_SIZE=20
POOLER_MAX_CLIENT_CONN=1000
POOLER_DB_POOL_SIZE=50

# Supabase Dashboard Credentials
DASHBOARD_USERNAME=<your-dashboard-username>
DASHBOARD_PASSWORD=<your-dashboard-password>

# JWT and Authentication
# Generate new keys at: https://supabase.com/docs/guides/self-hosting#api-keys
ANON_KEY=<your-supabase-anon-key>
SERVICE_ROLE_KEY=<your-supabase-service-role-key>
JWT_SECRET=<your-jwt-secret-min-32-chars>
JWT_EXPIRY=3600

# Database Connection String for Application
DATABASE_URL=postgresql://supabase_admin:<your-secure-postgres-password>@db-prod:5432/postgres

# Supavisor Encryption Key (for connection pooler)
SUPAVISOR_ENC_KEY=<your-supavisor-encryption-key>

# Vault Encryption Key (for secrets management)
VAULT_ENC_KEY=<your-vault-encryption-key>

# Secret Key Base (for session encryption)
SECRET_KEY_BASE=<your-secret-key-base>

# Email Configuration (Production SMTP)
SMTP_ADMIN_EMAIL=noreply@your-domain.com
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=<your-smtp-username>
SMTP_PASS=<your-smtp-password>
SMTP_SENDER_NAME=Bloom Platform

# Rate Limiting (stricter in production)
RATE_LIMIT_EMAIL_SENT=10
RATE_LIMIT_WINDOW=3600

# Studio Configuration
STUDIO_PG_META_URL=http://supabase-meta:8080

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_API_KEY=<your-analytics-key>

# Logging Level (info, warn, error)
LOG_LEVEL=warn

# Enable SSL/TLS (production)
SSL_ENFORCE=true
POSTGRES_SSL_MODE=require

# CORS Configuration (restrictive in production)
CORS_ALLOWED_ORIGINS=https://your-domain.com

# Security Headers
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Monitoring & Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Feature Flags
ENABLE_SIGNUP=false  # Restrict signups in production
ENABLE_API_DOCS=false  # Hide API docs in production

# CDN Configuration (if using)
CDN_URL=https://cdn.your-domain.com
STATIC_ASSETS_URL=https://static.your-domain.com
