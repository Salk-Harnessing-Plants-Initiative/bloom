-- create the scrna_datasets table
CREATE TABLE scrna_datasets (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name TEXT NOT NULL,
    species_id BIGINT REFERENCES species(id) NOT NULL,
    scientist_id BIGINT REFERENCES people(id) NOT NULL,
    url TEXT
);

-- set up RLS
ALTER TABLE scrna_datasets ENABLE ROW LEVEL SECURITY;

-- grant permissions
DROP POLICY IF EXISTS "Authenticated users can select scrna_datasets" ON scrna_datasets;
CREATE POLICY "Authenticated users can select scrna_datasets"
ON scrna_datasets AS permissive
FOR SELECT TO authenticated
USING (true);
